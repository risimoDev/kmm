# ═══════════════════════════════════════
# КОНТЕНТ ЗАВОД — Конфигурация
# ═══════════════════════════════════════

# --- N8N ---
N8N_PROTOCOL=http
N8N_HOST=localhost
N8N_PORT=5678
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=adminrisimofloor

GENERIC_TIMEZONE=Europe/Moscow
TZ=Europe/Moscow

# WEBHOOK_URL — ВАЖНО! Должен быть доступен извне для Telegram бота
# Локально: http://localhost:5678
# Продакшен: https://your-domain.com (без /webhook)
WEBHOOK_URL=http://localhost:5678

N8N_ENCRYPTION_KEY=rqcdgsEgsDF34fqddsdfg34qf3g4q

# Таймаут для длинных пайплайнов (Wait nodes)
# -1 = без лимита (рекомендуется для этого проекта)
EXECUTIONS_TIMEOUT=-1

# --- PostgreSQL ---
DB_TYPE=postgresdb
DB_POSTGRESDB_DATABASE=n8n
DB_POSTGRESDB_HOST=postgres
DB_POSTGRESDB_PORT=5432
DB_POSTGRESDB_USER=n8n_user
DB_POSTGRESDB_PASSWORD=adminrisimofloor

# --- Redis ---
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=adminrisimofloor

# --- MinIO (S3 хранилище) ---
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=adminrisimofloor

# --- Dashboard (веб-панель управления) ---
JWT_SECRET=ЗАМЕНИТЕ_НА_СЛУЧАЙНУЮ_СТРОКУ_32_СИМВОЛА
DASHBOARD_USERS=admin:СЛОЖНЫЙ_ПАРОЛЬ:tech_admin,manager:ДРУГОЙ_ПАРОЛЬ:business_owner
DASHBOARD_URL=http://localhost:3001
CORS_ORIGIN=*

# --- Контроль доступа ---
# Telegram ID пользователей, которым разрешён вход (через запятую)
TELEGRAM_ALLOWED_IDS=
# Секретная фраза для получения кода в боте (/login <фраза>)
TELEGRAM_LOGIN_SECRET=ЗАМЕНИТЕ_СЕКРЕТНУЮ_ФРАЗУ

# --- AI Провайдер (доступны в N8N через $env.VAR_NAME) ---
AI_API_KEY=ВСТАВЬТЕ_ВАШ_КЛЮЧ
AI_MODEL=gpt-4o
AI_BASE_URL=https://gptunnel.ru/v1
AI_AUTH_PREFIX=

# --- Telegram Bot ---
TELEGRAM_BOT_TOKEN=ВСТАВЬТЕ_ТОКЕН_БОТА
TELEGRAM_CHAT_ID=0
TELEGRAM_CHANNEL_ID=0
TELEGRAM_MODERATOR_CHAT_ID=0

# --- VK (опционально) ---
VK_ACCESS_TOKEN=
VK_GROUP_ID=

# --- Режим работы ---
NODE_ENV=development

# ═══════════════════════════════════════
# НАСТРОЙКА TELEGRAM БОТА
# ═══════════════════════════════════════
# 1. Создайте бота: @BotFather → /newbot
# 2. Получите токен: 123456:ABC-DEF...
# 3. Установите Webhook:
#    curl -X POST "https://api.telegram.org/bot<TOKEN>/setWebhook?url=<WEBHOOK_URL>/webhook/telegram-bot"
#    Пример:
#    curl -X POST "https://api.telegram.org/bot123:ABC/setWebhook?url=https://your-domain.com/webhook/telegram-bot"
#
# Для локальной разработки используйте ngrok:
#    ngrok http 5678
#    curl -X POST "https://api.telegram.org/bot<TOKEN>/setWebhook?url=https://xxxx.ngrok.io/webhook/telegram-bot"

# ═══════════════════════════════════════
# AI ПРОВАЙДЕРЫ (справка)
# ═══════════════════════════════════════
# 🔵 GPTunnel.ru    → https://gptunnel.ru/v1 (ключ БЕЗ Bearer)
# 🔀 OpenRouter     → https://openrouter.ai/api/v1 (Bearer sk-or-...)
# 🟢 Ollama         → http://host.docker.internal:11434/v1 (Bearer ollama)
# 🟡 LM Studio     → http://host.docker.internal:1234/v1 (Bearer lm-studio)
